{% load static %}
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Sehdev Machine Tools — Enquiry</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@600;800&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --primary: #0a66c2;
      --primary-dark: #084d99;
      --accent: #e63946;
      --light: #e6f0fa;
      --white: #ffffff;
      --dark: #0d1b2a;
      --muted: #6c757d;
      --card: #f8fbff;
      --nav-height: 70px;
      --max-width: 1200px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:"Poppins","Segoe UI",Arial,sans-serif;
      background: linear-gradient(180deg, var(--light) 0%, #ffffff 100%);
      color:var(--dark);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* ===== HEADER (same look as main site) ===== */
/* ===== NEW HEADER & MEGA MENU CSS (EXACT MATCH) ===== */
    header.site-header {
      position: fixed; top: 0; left: 0; width: 100%;
      z-index: 1400; display: flex; flex-direction: column;
      backdrop-filter: blur(12px) saturate(160%);
      -webkit-backdrop-filter: blur(12px) saturate(160%);
      background: rgba(255, 255, 255, 0.8);
      border-bottom: 1px solid rgba(13, 27, 42, 0.06);
      transition: all .25s ease;
    }

    .nav-row {
      height: 112px; /* Fixed height for mega menu */
      display: flex; align-items: center;
      padding: 0 6%; gap: 24px; justify-content: space-between;
    }

    .brand { display: flex; align-items: center; gap: 12px; text-decoration: none; }
    .brand img { height: 60px; border-radius: 6px; object-fit: cover; }
    
    .title {
      font-family: 'Inter', 'Exo 2', sans-serif;
      font-size: 33px; font-weight: 600; color: #000;
      letter-spacing: 0.2px; line-height: 1.05; text-transform: uppercase;
    }
    
    .brand .subtitle { font-size: 15px; font-weight: 550; color: #000; display: block; }

    nav.primary-nav ul { list-style: none; display: flex; align-items: center; gap: 6px; margin: 0; padding: 0; }
    
    nav.primary-nav a, .mega-btn {
      display: inline-flex; align-items: center; padding: 14px 20px;
      border-radius: 8px; color: #0d1b2a; font-weight: 500;
      font-size: 16px; text-decoration: none; transition: all .25s ease;
      background: transparent; border: none; cursor: pointer;
      font-family: 'Poppins', sans-serif;
    }

    nav.primary-nav a:hover, .mega-btn:hover {
      background: rgba(10, 102, 194, 0.08); color: #0a66c2;
    }

    /* MEGA MENU LOGIC */
    .mega { position: relative; }
    .mega-panel {
      position: absolute; left: 50%; transform: translateX(-50%);
      top: calc(100% + 1px); width: min(1000px, 92vw);
      background: #fff; border: 1px solid rgba(13, 27, 42, 0.06);
      border-radius: 14px; padding: 22px;
      box-shadow: 0 20px 50px rgba(13, 27, 42, 0.12);
      display: none; gap: 18px; grid-template-columns: repeat(3, 1fr); z-index: 1500;
    }

    .mega:hover .mega-panel { display: grid; }

    .mega-col h4 {
      margin: 6px 10px 12px; font-size: 13px; font-weight: 700;
      text-transform: uppercase; color: #6c757d;
      border-bottom: 1px solid #f0f0f0; padding-bottom: 5px;
    }

    .mega-col a {
      display: block; padding: 10px 16px; border-radius: 10px;
      font-size: 15px; font-weight: 600; color: #0d1b2a;
      text-decoration: none;
    }
    
    .mega-col a:hover { background: rgba(10, 102, 194, 0.06); color: #0a66c2; }

    .nav-utils { display: flex; align-items: center; gap: 12px; margin-left: auto; }
    .gst { font-size: 12px; color: #000; font-weight: 600; text-align: right; line-height: 1.4; }

    /* Fix for page content starting position */
    main.wrapper {
      padding-top: 130px; /* Taller navbar ke liye gap */
      max-width: 1200px;
      margin: 0 auto;
    }

    /* ===== HERO (themed) ===== */
    .hero {
      position: relative;
      height: 52vh;
      width: var(--max-width);
      background: url('/media/enquiry%20bg.png') center/cover no-repeat;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      overflow: hidden;
      border-radius: 12px;
      margin-top: 16px;
    }
    .hero::before {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(
        90deg,
        rgba(5, 10, 15, 0.78) 0%,
        rgba(5, 10, 15, 0.58) 35%,
        rgba(5, 10, 15, 0.28) 100%
      );
      z-index: 0;
      pointer-events: none;
    }
    .hero-content {
      position: relative;
      z-index: 2;
      max-width: 920px;
      padding: 28px 20px;
      color: #fff;
    }
    .hero-content h1 {
      margin: 0 0 10px;
      font-size: 2.6rem;
      color: var(--primary);
      font-weight: 800;
      font-family: 'Exo 2', sans-serif;
      text-shadow: 0 6px 18px rgba(0,0,0,0.75);
    }
    .hero-content p {
      margin: 0;
      color: rgba(255,255,255,0.95);
      font-size: 1.05rem;
      line-height: 1.6;
      text-shadow: 0 3px 10px rgba(0,0,0,0.6);
      max-width: 760px;
      margin-left: auto;
      margin-right: auto;
    }

    /* cursor blink animation */
    .cursor {
      display: inline-block;
      margin-left: 3px;
      font-weight: 300;
      animation: blink 0.8s infinite;
    }
    @keyframes blink {
      0%, 50% { opacity: 1; }
      50.01%,100% { opacity: 0; }
    }

    .enquiry-wrap{
      display: grid;
      grid-template-columns: 1.1fr 1.6fr; /* left | right */
      gap: 28px;
      align-items: start;
      max-width: 1200px;
      margin: 20px auto;
      padding: 0 6%;
    }

    .enquiry-left, .enquiry-right{
      background: #f8fbff;
      border: 1px solid rgba(13,27,42,0.06);
      border-radius: 12px;
      padding: 24px;
      box-shadow: 0 6px 18px rgba(13,27,42,0.06);
    }

    /* responsive */
    @media (max-width: 980px){
      .enquiry-wrap{ grid-template-columns: 1fr; }
    }

    /* ===== CARDS ===== */
    .card {
      background: #fff;
      border-radius: 12px;
      padding: 26px;
      border: 1px solid rgba(13,27,42,0.06);
      box-shadow: 0 10px 30px rgba(13,27,42,0.04);
    }
    .card h2{margin-top:0;color:var(--primary);font-size:1.3rem}
    .card p{color:var(--muted);line-height:1.6}

    /* info list */
    .info-list{margin-top:18px;padding:0;list-style:none}
    .info-list li{display:flex;gap:14px;margin-bottom:18px;align-items:flex-start}
    .info-icon{flex-shrink:0;width:36px;height:36px;border-radius:8px;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700}
    .green{background:#28a745}.blue{background:#007bff}.orange{background:#ff6600}

    .contact-box{margin-top:18px;padding:14px;border-radius:8px;background:linear-gradient(180deg,#f8fbff,#ffffff);border:1px solid rgba(13,27,42,0.04)}
    .contact-box p{margin:0;color:var(--muted)}
    .contact-box a{display:inline-block;margin-top:8px;color:var(--primary);font-weight:600;text-decoration:none}

    /* ===== FORM STYLING (themed) ===== */
    form label{display:block;font-size:14px;margin-bottom:8px;color:var(--dark);font-weight:600}
    form .form-row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    form .full{grid-column:1 / -1}
    input[type="text"], input[type="email"], input[type="tel"], textarea {
      width:100%;padding:12px;border-radius:8px;border:1px solid rgba(13,27,42,0.06);background:#fbfdff;color:var(--dark);font-size:14px;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.6);
    }
    textarea{min-height:120px;resize:vertical}
    input::placeholder, textarea::placeholder{color:#9aa3b2}

    /* Checkbox group (styled cards) */
    .checkbox-group{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px;margin-top:8px}
    .checkbox-item{display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:8px;border:1px solid rgba(13,27,42,0.04);background:#fbfdff;cursor:pointer}
    .checkbox-item input{width:18px;height:18px}

    /* Consent checkbox */
    .consent{display:flex;align-items:center;gap:10px;color:var(--muted);margin-top:10px}

    /* Buttons */
    .btn-row{display:flex;gap:12px;margin-top:16px}
    .btn-primary{background:linear-gradient(180deg,var(--primary),var(--primary-dark));color:#fff;padding:10px 18px;border-radius:10px;border:none;font-weight:700;cursor:pointer;box-shadow:0 10px 28px rgba(10,102,194,0.12)}
    .btn-secondary{background:#ffffff;border:1px solid rgba(13,27,42,0.06);padding:10px 18px;border-radius:10px;color:var(--primary);cursor:pointer;font-weight:700}
    .btn-primary:hover{transform:translateY(-2px)}
    .btn-secondary:hover{background:#f4f7fb}

    /* small helpers */
    .muted{color:var(--muted);font-size:0.95rem}
    .small{font-size:0.9rem;color:var(--muted)}
    .hidden{display:none;}

    /* footer */
    footer.site-footer{margin-top:40px;padding:30px 6%;background:var(--dark);color:#fff;border-top:1px solid rgba(255,255,255,0.03)}
    footer.site-footer p{margin:0}
    .nav-toggle{
  display: none;
  background: none;
  border: none;
  font-size: 28px;
  cursor: pointer;
}
/* ================= ENQUIRY PAGE MOBILE OVERRIDES ================= */
@media (max-width: 900px){

  /* ---------- GLOBAL ---------- */
  :root{
    --nav-height: 76px;
  }

  html, body{
    overflow-x: hidden;
  }

  /* ---------- NAVBAR ---------- */
  .nav-toggle{
    display: block;
    color: var(--dark);
  }

  .nav-utils{
    display: none; /* GST block hidden on mobile */
  }

  nav.primary-nav{
    position: absolute;
    top: var(--nav-height);
    left: 0;
    width: 100%;
    background: #fff;
    max-height: 0;
    overflow: hidden;
    transition: max-height .3s ease;
    border-bottom: 1px solid rgba(13,27,42,.08);
  }

  nav.primary-nav.open{
    max-height: 90vh;
  }

  nav.primary-nav ul{
    flex-direction: column;
    align-items: flex-start;
    padding: 12px 6%;
  }

  nav.primary-nav a,
  nav.primary-nav .mega-btn{
    width: 100%;
    justify-content: flex-start;
  }

  /* Hide mega dropdowns on mobile (ENQUIRY PAGE) */
  nav.primary-nav li.mega .mega-panel{
    display: none !important;
  }

  /* ---------- BRAND SCALE ---------- */
  .brand img{
    height: 40px;
  }

  .title{
    font-size: 18px;
    line-height: 1.1;
  }

  .brand .subtitle{
    font-size: 11px;
  }

  /* ---------- MAIN WRAPPER ---------- */
  main.wrapper{
    padding-top: calc(var(--nav-height) + 12px);
  }

  /* ---------- HERO ---------- */
  .hero{
    height: auto;
    min-height: unset;
    width: 100%;
    border-radius: 0;
    margin-top: 0;
    padding: 60px 6% 40px;
  }

  .hero-content h1{
    font-size: 2.1rem;
  }

  .hero-content p{
    font-size: 1rem;
    line-height: 1.6;
  }

  /* ---------- ENQUIRY LAYOUT ---------- */
  .enquiry-wrap{
    grid-template-columns: 1fr;
    gap: 20px;
    padding: 0 6%;
  }

  .enquiry-left,
  .enquiry-right{
    padding: 20px;
  }

  /* ---------- FORM ---------- */
  form .form-row{
    grid-template-columns: 1fr;
  }

  textarea{
    min-height: 110px;
  }

  /* Checkbox grid → single column */
  .checkbox-group{
    grid-template-columns: 1fr;
  }

  /* Buttons stack */
  .btn-row{
    flex-direction: column;
  }

  .btn-row button{
    width: 100%;
  }

  /* Fieldsets */
  fieldset{
    padding: 12px;
  }

  /* ---------- FOOTER ---------- */
  footer.site-footer > div{
    flex-direction: column;
    text-align: center;
    gap: 6px;
  }

}
/* ================= END ENQUIRY PAGE MOBILE OVERRIDES ================= */


  </style>
</head>
<body>

<header class="site-header" id="siteHeader">
  <div class="nav-row">
    <a href="{% url 'home' %}" class="brand">
      <img src="/media/logo with bg.jpg" alt="Sehdev logo">
      <div>
        <span class="title">Sehdev Machine Tools (India)</span><br>
        <small class="subtitle">Precision | Reliability</small>
      </div>
    </a>
    <button class="nav-toggle" aria-label="Toggle menu">☰</button>


    <nav class="primary-nav" aria-label="Primary">
      <ul>
        <li><a href="{% url 'home' %}">Home</a></li>
        <li><a href="{% url 'aboutus_view' %}">About Us</a></li>
        
        <li class="mega">
          <button class="mega-btn">Products ▾</button>
          <div class="mega-panel">
            <div class="mega-col">
              <h4>Machines</h4>
              <a href="{% url 'LabellingMachine_view' %}">Labelling Machine</a>
              <a href="{% url 'SealingMachine_view' %}">Sealing Machine</a>
              <a href="{% url 'FillingMachine_view' %}">Filling Machine</a>
              <a href="{% url 'Ancillaryunits_view' %}">Ancillary Units</a>
              <a href="{% url 'washing_units_view' %}">Washing Units</a>
              <a href="{% url 'Conveyorsystems_view' %}">Conveyor System</a>
            </div>
            <div class="mega-col">
              <h4>Components</h4>
              <a href="{% url 'Nozzles_view' %}">Nozzles & Needles</a>
              <a href="{% url 'Mechanicalseals_view' %}">Mechanical Seals</a>
              <a href="{% url 'Rubbercomponents_view' %}">Rubber Components</a>
              <a href="{% url 'ChangeParts_view' %}">Change Parts</a>
            </div>
            <div class="mega-col">
              <h4>Miscellaneous</h4>
              <a href="{% url 'Misc_view' %}">Miscellaneous Components</a>
            </div>
          </div>
        </li>

        <li class="mega">
          <button class="mega-btn">Services ▾</button>
          <div class="mega-panel" style="grid-template-columns: repeat(2, 1fr); width: 600px;">
            <div class="mega-col">
              <h4>Custom Solutions</h4>
              <a href="/home/services/">Design Customization &amp; Reverse Engineering</a>
            </div>
            <div class="mega-col">
              <h4>Maintenance</h4>
              <a href="/home/services/">Reverse Engineering</a>
            </div>
          </div>
        </li>

        <li><a href="https://maps.app.goo.gl/CpQA18PR5k3FDf7P8">Location</a></li>
        <li><a href="/home/contactus/">Contact Us</a></li>
      </ul>
    </nav>

    <div class="nav-utils">
      <div class="gst">
        IEC No. 1210002485<br>
        GSTIN: 03AAXPK7104N1ZA
      </div>
    </div>
  </div>
</header>

<main class="wrapper">
  <!-- HERO -->
  <section class="hero" role="region" aria-label="Get a quote">
    <div class="hero-content">
      <h1>
        <span id="typed-text"></span><span class="cursor">|</span>
      </h1>
      <p>Share your requirements and we’ll propose the best Products, configurations and pricing for your needs.</p>
    </div>
  </section>

  <!-- TWO COLUMN CONTENT -->
  <div class="enquiry-wrap">

    <!-- LEFT: Info -->
    <section class="card" aria-labelledby="info-heading">
      <h2 id="info-heading">Tell us what you need</h2>
      <p>Request quotations for labelling, sealing, filling, capping, packaging lines and more. Share a few details and we'll follow up with tailored options and pricing.</p>

      <ul class="info-list" role="list">
        <li>
          <div class="info-icon green">✓</div>
          <div>
            <p><strong>Fast, friendly quotes</strong><br><span class="small">Clear lead times, shipping, and after-sales support.</span></p>
          </div>
        </li>

        <li>
          <div class="info-icon blue">ⓘ</div>
          <div>
            <p><strong>Custom configurations</strong><br><span class="small">Share your product, speed and packaging specs.</span></p>
          </div>
        </li>

        <li>
          <div class="info-icon orange">⚑</div>
          <div>
            <p><strong>Ensuring best quality</strong><br><span class="small">Top-quality products that meet the highest standards.</span></p>
          </div>
        </li>
      </ul>

      <div class="contact-box" aria-label="Contact details">
        <p class="muted">Prefer speaking to us? Call:</p>
        <a href="tel:+919872894141">+91 98728 94141</a><br>
        <a href="tel:+919878010962">+91 98780 10962</a>
        <p class="muted" style="margin-top:8px">Email: <a href="mailto:Sehdev02@yahoo.com">Sehdev02@yahoo.com</a></p>
      </div>
    </section>

    <!-- RIGHT: Form -->
    <section class="enquiry-right">
      <form method="POST" action="{% url 'enquiry' %}" enctype="multipart/form-data">
        {% csrf_token %}
        {% if form.errors %}
  <div style="margin:10px 0;padding:10px;border:1px solid #f5c2c7;background:#f8d7da;color:#842029;border-radius:8px">
    <b>Fix these errors:</b>
    <ul style="margin:8px 0 0 18px">
      {% for field, errors in form.errors.items %}
        <li><b>{{ field }}:</b> {{ errors|join:", " }}</li>
      {% endfor %}
      {% for e in form.non_field_errors %}
        <li>{{ e }}</li>
      {% endfor %}
    </ul>
  </div>
{% endif %}
        <div class="form-row">
          <div>
            <label for="full_name">Full name *</label>
            <input id="full_name" name="full_name" type="text" placeholder="Jane Doe" required>
          </div>

          <div>
            <label for="company">Company</label>
            <input id="company" name="company" type="text" placeholder="Your company">
          </div>

          <div>
            <label for="email">Email *</label>
            <input id="email" name="email" type="email" placeholder="name@email.com" required>
          </div>

          <div>
            <label for="phone">Phone</label>
            <input id="phone" name="phone" type="tel" placeholder="+91 98765 43210">
          </div>
        </div>

        <div class="form-row" style="margin-top:12px">
          <div>
            <label for="city">City</label>
            <input id="city" name="city" type="text" placeholder="City">
          </div>
          <div>
            <label for="country">Country</label>
            <input id="country" name="country" type="text" placeholder="Country">
          </div>
        </div>

        <label style="margin-top:18px;display:block;font-weight:700">Machinery interested in *</label>
       <div class="checkbox-group" role="group" aria-label="Select machinery">
  <label class="checkbox-item"><input type="checkbox" name="machinery" value="Labelling Machines"><span>Labelling Machines</span></label>
  <label class="checkbox-item"><input type="checkbox" name="machinery" value="Sealing Machines"><span>Sealing Machines</span></label>
  <label class="checkbox-item"><input type="checkbox" name="machinery" value="Filling Machines"><span>Filling Machines</span></label>
  <label class="checkbox-item"><input type="checkbox" name="machinery" value="Capping Machines"><span>Capping Machines</span></label>
  <label class="checkbox-item"><input type="checkbox" name="machinery" value="Packaging Lines"><span>Packaging Lines</span></label>
  <label class="checkbox-item"><input type="checkbox" name="machinery" value="Ancillary Units"><span>Ancillary Units</span></label>

  <label class="checkbox-item"><input type="checkbox" name="machinery" value="Conveyors"><span>Conveyors</span></label>
  <label class="checkbox-item"><input type="checkbox" name="machinery" value="Spare Parts"><span>Spare Parts</span></label>
  
  <label class="checkbox-item"><input type="checkbox" name="machinery" value="Nozzles & Needles"><span>Nozzles & Needles</span></label>
  <label class="checkbox-item"><input type="checkbox" name="machinery" value="Mechanical Seals"><span>Mechanical Seals</span></label>
  <label class="checkbox-item"><input type="checkbox" name="machinery" value="Change Parts"><span>Change Parts</span></label>
  
  <label class="checkbox-item"><input type="checkbox" name="machinery" value="Misc"><span>Misc</span></label>
</div>
        <div style="margin-top:16px">
          <label for="project_details">Project details</label>
          <textarea id="project_details" name="project_details" placeholder="Tell us about your project, product, speeds, container size, required output..."></textarea>
        </div>

        <label class="consent">
          <input type="checkbox" id="consent" name="consent" value="yes" required>
          <span>I agree to be contacted about my enquiry.</span>
        </label>

        <!-- Show detected intent -->
        <div id="serviceBadge" style="display:none;margin:0 0 10px 0;
          font-weight:700;color:#0a66c2;background:#eaf3ff;border:1px solid rgba(10,102,194,.2);
          padding:8px 12px;border-radius:8px;"></div>

        <label for="serviceType">Service type</label>
        <select id="serviceType" name="service_type" >
          <option value="">Select…</option>
          <option value="customization">Design Customization</option>
          <option value="reverse">Reverse Engineering</option>
          <option value="refurbishment">Product Refurbishment</option>
         </select>

        <input type="hidden" id="sourceService" name="source_service" value="">

        <!-- Customization details -->
        <fieldset id="fsCustomization" class="svc-fs hidden" style="margin-top:12px">
          <legend>Customization details</legend>
          <label>Machine/Line type <input name="cust_line_type" type="text"></label>
          <label>Target throughput (BPM/UPM) <input name="cust_throughput" type="text"></label>
          <label>Container/Format <input name="cust_format" type="text"></label>
          <label>Pain points / change parts needed <textarea name="cust_pain_points"></textarea></label>
          <label>PLC/HMI brand <input name="cust_plc" type="text" placeholder="Siemens / Allen-Bradley …"></label>
          <label>Integration needed <input name="cust_integration" type="text" placeholder="Conveyor, Filler, Labeller…"></label>
          <label>Timeline / Deadline <input name="cust_deadline" type="text"></label>
        </fieldset>

        <!-- Reverse engineering details -->
        <fieldset id="fsReverse" class="svc-fs hidden" style="margin-top:12px">
          <legend>Reverse engineering details</legend>
          <label>Part name / function <input name="rev_part" type="text"></label>
          <label>Quantity needed <input name="rev_qty" type="number" min="1"></label>
          <label>Sample available?
            <select name="rev_sample"><option>Yes</option><option>No</option></select>
          </label>
          <label>Material (current/desired) <input name="rev_material" type="text" placeholder="SS316L, UHMW-PE, PTFE, Viton…"></label>
          <label>Operating conditions <input name="rev_conditions" type="text" placeholder="Temp, chemicals, load…"></label>
          <label>Dimensions/drawings available?
            <select name="rev_docs"><option>Yes</option><option>No</option></select>
          </label>
          <label>Tolerance / critical fits <input name="rev_tolerance" type="text"></label>
          <label>Urgency <input name="rev_urgency" type="text"></label>
        </fieldset>

        <!-- Product Refurbishment details -->

        <fieldset id="fsRefurbishment" class="svc-fs hidden" style="margin-top:12px">
          <legend>Product Refurbishment details</legend>
          <label>Machine to be refurbished <input name="refurb_machine_name" type="text"></label>
          <label>Current Condition 
            <select name="refurb_condition">
              <option value="working">Working (Needs Tuning)</option>
              <option value="partial">Partially Working</option>
              <option value="non_functional">Non-Functional</option>
            </select>
          </label>
          <label>Year of Manufacture <input name="refurb_year" type="text"></label>
          <label>Specific issues or upgrades required <textarea name="refurb_notes"></textarea></label>
        </fieldset>
        <!-- Common attachments -->
        <label style="margin-top:12px">Attach files (photos/drawings/video)
          <input type="file" name="attachments" multiple>
        </label>

        <div class="btn-row">
          <button type="submit" class="btn-primary">Submit Enquiry</button>
          <button type="reset" class="btn-secondary">Reset</button>
        </div>
      </form>
    </section>

  </div>

  <footer class="site-footer" role="contentinfo">
    <div style="max-width:var(--max-width);margin:0 auto;display:flex;justify-content:space-between;align-items:center;gap:12px;padding:12px 0">
      <p>©️ {{ year|default:"2025" }} Sehdev Machine Tools. All rights reserved.</p>
      <p class="small">IEC No. 1210002485 • GSTIN: 03AAXPK7104N1ZA</p>
    </div>
  </footer>

</main>

<!-- small JS: focus first input on load -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    // 1. Focus first input
    const first = document.getElementById('full_name');
    if (first) first.focus();

    // 2. Typing Animation Logic
    const texts = ["Get a Quote Today!", "Request a Custom Solution"];
    const typed = document.getElementById("typed-text");
    let textIndex = 0, charIndex = 0, isDeleting = false;

    function type() {
        if (!typed) return;
        const current = texts[textIndex];
        if (!isDeleting && charIndex <= current.length) {
            typed.textContent = current.substring(0, charIndex++);
            setTimeout(type, 60);
        } else if (isDeleting && charIndex >= 0) {
            typed.textContent = current.substring(0, charIndex--);
            setTimeout(type, 30);
        } else {
            if (!isDeleting && charIndex > current.length) {
                setTimeout(() => { isDeleting = true; type(); }, 1500);
            } else if (isDeleting && charIndex < 0) {
                isDeleting = false;
                textIndex = (textIndex + 1) % texts.length;
                setTimeout(type, 200);
            }
        }
    }
    type();

    // 3. Service Type & URL Prefill Logic
    const serviceSelect = document.getElementById('serviceType');
    const fsCust = document.getElementById('fsCustomization');
    const fsRev = document.getElementById('fsReverse');
    const fsRefurb = document.getElementById('fsRefurbishment');
    const badge = document.getElementById('serviceBadge');
    const source = document.getElementById('sourceService');

    function updateFields(type) {
        if (!fsCust || !fsRev || !fsRefurb) return;
        fsCust.classList.add('hidden');
        fsRev.classList.add('hidden');
        fsRefurb.classList.add('hidden');

        if (type === 'customization') fsCust.classList.remove('hidden');
        else if (type === 'reverse') fsRev.classList.remove('hidden');
        else if (type === 'refurbishment') fsRefurb.classList.remove('hidden');
    }

    // --- SMART AUTO-FILL LOGIC (Merged) ---
    const urlParams = new URLSearchParams(window.location.search);
    const prefillService = urlParams.get('service');
    const prefillMach = urlParams.getAll('machinery'); // Purana checkbox method
    const productName = urlParams.get('product');     // Naya dynamic method
    const categoryName = urlParams.get('cat');       // Naya category method

    // A. Handle Machine/Product Auto-fill
    if (productName) {
        const projectDetails = document.getElementById('project_details');
        if (projectDetails) {
            projectDetails.value = `I am interested in the "${productName}". Please provide a formal quotation and technical specifications for this unit.\n\nAdditional Requirements:\n- `;
        }
        
        // --- POWERFUL CHECKBOX LOGIC ---
        if (categoryName) {
    // 1. URL se aaye naam ko lowercase karein (e.g., "change")
    const target = decodeURIComponent(categoryName).toLowerCase().trim();
    
    // 2. Saare checkboxes dhoondo
    const checkboxes = document.querySelectorAll('input[name="machinery"]');
    
    checkboxes.forEach(cb => {
        const val = cb.value.toLowerCase();
        
        // 3. Agar checkbox ki value mein "change" word hai (e.g., "change parts") -> TICK
        if (val.includes(target)) {
            cb.checked = true;
            console.log("Auto-ticked:", cb.value); 
        }
            });
        }
    }

    // B. Handle Service Prefill (from Services page)
    if (prefillService) {
        let normalized = prefillService === 'reverse-engineering' ? 'reverse' : prefillService;
        if (serviceSelect) serviceSelect.value = normalized;
        if (source) source.value = normalized;
        updateFields(normalized);

        if (badge) {
            const labels = {
                'customization': 'Design Customization',
                'reverse': 'Reverse Engineering',
                'refurbishment': 'Product Refurbishment'
            };
            badge.style.display = "inline-block";
            badge.textContent = "You are enquiring about: " + (labels[normalized] || 'General / Product');
        }
    }

    // C. Handle Multiple Machinery Checkboxes (if sent as list)
    if (prefillMach.length > 0) {
        prefillMach.forEach(val => {
            const cb = document.querySelector(`input[name="machinery"][value="${val}"]`);
            if (cb) cb.checked = true;
        });
    }

    // 4. Listeners
    if (serviceSelect) {
        serviceSelect.addEventListener('change', e => {
            updateFields(e.target.value);
            if (badge) badge.style.display = "none";
        });
    }

    // 5. Mobile Nav Toggle
    const navToggle = document.querySelector('.nav-toggle');
    const primaryNav = document.querySelector('nav.primary-nav');
    if (navToggle && primaryNav) {
        navToggle.addEventListener('click', e => {
            e.stopPropagation();
            primaryNav.classList.toggle('open');
        });
        document.addEventListener('click', () => primaryNav.classList.remove('open'));
    }
});
</script>
</body>
</html>